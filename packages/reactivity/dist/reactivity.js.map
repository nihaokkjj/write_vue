{
  "version": 3,
  "sources": ["../src/effect.ts", "../../shared/src/index.ts", "../src/reactiveEffect.ts", "../src/baseHandler.ts", "../src/reactive.ts", "../src/ref.ts", "../src/computed.ts"],
  "sourcesContent": ["import { DirtyLevels } from \"./constants\"\n\n\nexport function effect(fn, options? ) {\n  //\u521B\u5EFA\u4E00\u4E2A\u54CD\u5E94\u5F0Feffect, \u6570\u636E\u53D8\u5316\u540E\u53EF\u4EE5\u91CD\u65B0\u6267\u884C\n\n  //\u521B\u5EFA\u4E00\u4E2Aeffect, \u53EA\u8981\u4F9D\u8D56\u7684\u5C5E\u6027\u53D8\u5316, \u5C31\u8981\u6267\u884C\u56DE\u8C03\n  const _effect = new ReactiveEffect(fn, () => {\n    _effect.run()\n  })\n  _effect.run()\n\n  if(options) {\n    Object.assign(_effect, options) //\u7528\u6237\u4F20\u9012\u7684\u8986\u76D6\u5185\u7F6E\u7684\n  }\n  const runner = _effect.run.bind(_effect)\n  runner._effect = _effect //\u4F7F\u5916\u90E8\u53EF\u4EE5\u8C03\u7528\n  return runner //\u5916\u754C\u53EF\u4EE5\u81EA\u5DF1\u8C03\u7528run\n}\n\nexport let activeEffect\n\nfunction proCleanEffect(effect) {\n  effect._depsLength = 0\n  effect._trackedId++//\u6BCF\u6B21\u6267\u884C, id\u90FD\u662F+1\n  //\u5982\u679C\u5728\u540C\u4E00\u4E2Aeffect\u4E2D, \u540C\u4E00\u79CD\u6570\u636E\u591A\u6B21\u8C03\u7528, id\u5C31\u662F\u76F8\u540C\u7684\n}\n\nfunction postCleanEffect(effect) {\n  //\u6E05\u7406\u591A\u4F59\u7684\u957F\u5EA6\n  if (effect.deps.length > effect._depsLength) {\n    for (let i = effect._depsLength; i < effect.deps.length; ++i) {\n     cleanDepEffect(effect.deps[i], effect)\n    }\n    effect.deps.length = effect._depsLength\n  }\n}\n\n export class ReactiveEffect{\n  _trackedId = 0 //\u7528\u4E8E\u8BB0\u5F55\u5F53\u524Deffect\u6267\u884C\u4E86\u51E0\u6B21\n  deps = [] // \u6570\u7EC4\uFF0C\u7528\u6765\u5B58\u50A8\u8FD9\u4E2A effect \u6240\u4F9D\u8D56\u7684\u6240\u6709 dep (Map)\n  _depsLenhth = 0\n  _running = 0 //\u5224\u65AD\u76D1\u542C\u65F6\u503C\u662F\u5426\u53D1\u751F\u6539\u53D8\n  _dirtyLevel = DirtyLevels.Dirty //\u810F\u503C\n\n  public active = true //\u521B\u5EFA\u7684effect\u662F\u54CD\u5E94\u5F0F\u7684\n  //fn : \u7528\u6237\u7F16\u5199\u7684\u51FD\u6570\n  //\u5982\u679Cfn\u4E2D\u4F9D\u8D56\u7684\u6570\u636E\u53D1\u751F\u53D8\u5316\u540E, \u9700\u8981\u91CD\u65B0\u8C03\u7528 run()\n  constructor(public fn, public scheduler) { }\n\n  public get dirty() {\n    return this._dirtyLevel === DirtyLevels.Dirty\n  }\n  //\u8BBF\u95EE\u65F6, \u4E3A\u810F\u5C31\u8FD4\u56DEtrue\n  //\u8BBE\u7F6E\u65F6, \u4E3Atrue\u5C31\u662F\u810F\u7684\n  public set dirty(value) {\n    this._dirtyLevel = value ? DirtyLevels.Dirty : DirtyLevels.NoDirty\n  }\n\n  run() {// \u8BA9fn\u6267\u884C\n    // \u6BCF\u6B21\u8FD0\u884C\u540E, \u6B64\u503C\u5C31\u4E0D\u810F\u4E86, \u5728\u8FD9\u6B21effect\u4E2D\u4E0D\u5728\u6267\u884C\n    this._dirtyLevel = DirtyLevels.NoDirty\n\n    if (!this.active) { //\u4E0D\u662F\u6FC0\u6D3B\u7684\n      return this.fn()\n    }\n    let lastEffect = activeEffect\n    try {\n      activeEffect = this\n\n      //effect\u91CD\u65B0\u6267\u884C\u524D, \u9700\u8981\u5C06\u4E0A\u4E00\u6B21\u7684\u4F9D\u8D56\u60C5\u51B5\u5220\u9664\n      proCleanEffect(this) //\u521D\u59CB\u5316id\u548Clength\n\n      this._running++ //\u503C\u4E0D\u4E3A0, \u9700\u8981\u5C4F\u853D\u6B63\u5728\u8FD0\u884C\u7684effect\n      //\u9632\u6B62\u6570\u636E\u5728effect\u4E2D\u53D8\u5316\u9020\u6210\u6B7B\u5FAA\u73AF\n      return this.fn()\n    } finally {\n      this._running--//\u7ED3\u675F\u8FD0\u884C\n      postCleanEffect(this)\n      activeEffect = lastEffect\n    }\n  }\n  stop() { //\u5173\u95ED\u54CD\u5E94\u5F0F\n    this.active = false\n  }\n}\n\nfunction cleanDepEffect(dep, effect) {\n  dep.delete(effect)\n  if (dep.size === 0) {\n    dep.cleanup() //map\u4E3A\u7A7A, \u5220\u9664\n  }\n}\n\n//\u53CC\u5411\u8BB0\u5FC6\nexport function trackEffect(effect, dep) {\n  // debugger\n  //\u9700\u8981\u91CD\u65B0\u6536\u96C6\u4F9D\u8D56, \u5C06\u4E0D\u9700\u8981\u7684\u79FB\u9664\n\n  //\u5982\u679C\u8FD9\u4E2A\u6570\u4E4B\u524D\u6CA1\u6709\u88AB\u76D1\u6D4B, \u6216\u5728\u4E4B\u524D\u7684effect\u68C0\u6D4B\u8FC7\n  //\u66F4\u65B0id\u503C\n  //\u5982\u679C\u662F\u540C\u4E00\u4E2Aeffect\u91CC\u9762\u91CD\u590D\u51FA\u73B0\u7684\u503C, id\u503C\u76F8\u540C\n  if (dep.get(effect) !== effect._trackedId) {\n    dep.set(effect, effect._trackedId)\n  } \n  //efect\u4E0Edep\u5173\u8054\n  let oldDep = effect.deps[effect._depsLength]\n\n  if (oldDep !== dep) {//\u6CA1\u5B58\u8FC7\n    //\u5220\u9664\u8001\u7684\u6362\u65B0\u7684\n    if (oldDep) {\n      cleanDepEffect(oldDep, effect)\n    }\n   effect.deps[effect._depsLength++] = dep\n  } else {\n    effect._depsLength++\n  }\n}\n\nexport function triggerEffects(dep) {\n\n  for (const effect of dep.keys()) {\n\n    //\u5F53\u524D\u8FD9\u4E2A\u503C\u662F\u4E0D\u810F\u7684, \u4F46\u662F\u89E6\u53D1\u66F4\u65B0\u9700\u8981\u5C06\u503C\u53D8\u4E3A\u810F\u503C\n    //\u5C5E\u6027\u4F9D\u8D56\u4E86\u8BA1\u7B97\u5C5E\u6027, \u9700\u8981\u8BA9\u8BA1\u7B97\u5C5E\u6027\u7684dirty\u521D\u59CB\u5316\n    if (effect._dirtyLevel < DirtyLevels.Dirty) {\n      effect._dirtyLevel = DirtyLevels.Dirty\n    }\n\n    if (!effect._running) {\n      if(effect.scheduler) {\n        effect.scheduler()//\u4E0D\u662F\u6B63\u5728\u6267\u884C, \u624D\u80FD\u6267\u884C\n        //\u5426\u5219\u6613\u9020\u6210\u6B7B\u5FAA\u73AF\n      }\n    }\n  }\n}", "export function isObject(value) {\n  return typeof value === 'object' && value !== 'null'\n}\n\nexport function isFunction(value) {\n  return typeof value === 'function'\n}", "import { \n    activeEffect, \n    trackEffect,\n    triggerEffects \n  } from \"./effect\";\n\nconst targetMap = new WeakMap()//\u5B58\u653E\u4F9D\u8D56\u6536\u96C6\u7684\u5173\u7CFB\n\nexport const createDep = (cleanup, key) => {\n  const dep = new Map() as any\n  dep.cleanup = cleanup\n  dep.name = key\n  return dep\n}\n\nexport function track(target, key) {\n\n//activeEffect\u6709\u8FD9\u4E2A\u5C5E\u6027\u8BF4\u660E\u8FD9\u4E2Akey\u5B9E\u5728effect\u4E2D\u8BBF\u95EE\u7684\n//\u6CA1\u6709\u5219\u8BF4\u660E\u5728effect\u4E4B\u5916\u8BBF\u95EE\u7684\u4E0D\u7528\u8FDB\u884C\u6536\u96C6\n  if (activeEffect) {\n \n    let depsMap = targetMap.get(target)\n\n    if(!depsMap) { //\u65B0\u589E\u7684\n      targetMap.set(target, depsMap = new Map())\n    }\n\n    let dep = depsMap.get(key)\n\n    if (!dep) { //\u6E05\u7406\u4E0D\u9700\u8981\u7684\u5C5E\u6027\n      depsMap.set(\n        key,\n        dep = createDep(() => {depsMap.delete(key)}, key)\n      )\n    }\n    //\u5C06\u5F53\u524D\u7684effect\u653E\u5165\u5230dep(\u6620\u5C04\u8868)\u4E2D,\n    // \u540E\u7EED\u53EF\u4EE5\u6839\u636E\u503C\u7684\u53D8\u5316\u89E6\u53D1\u6B64dep\u4E2D\u5B58\u653E\u7684effect\n    trackEffect(activeEffect, dep)\n  }\n}\n\n\nexport function trigger \n  (target, key, newValue, oldValue) {\n  //\u662F\u5426\u5B58\u653E\u6709\u5173\u4F9D\u8D56\n  const despMap = targetMap.get(target)\n\n  // console.log('despMap', despMap)\n  if(!despMap) { //\u627E\u4E0D\u5230\u5BF9\u8C61, \u76F4\u63A5return\n    // console.log('ok')\n    return\n  }\n  let dep = despMap.get(key)\n  if (dep) {\n    //\u4FEE\u6539\u7684\u5C5E\u6027\u5BF9\u5E94\u4E86effect\n    triggerEffects(dep)\n  }\n}\n\n", "\nimport { track, trigger } from \"./reactiveEffect\"\nimport { isObject } from \"@vue/shared\"\nimport { reactive } from \"./reactive\"\nimport { ReactiveFlags } from './constants'\n\n//proxy\u9700\u8981\u642D\u914Dreflect\u4F7F\u7528, \u5C06this\u6307\u5411\u4EE3\u7406\u5BF9\u8C61\n\n//ProxyHandler\u662FJavaScript\u4E2D\u4E00\u4E2A\u4E13\u95E8\u7528\u4E8E\n//\u5B9A\u4E49 Proxy \u884C\u4E3A\u7684 \u63A5\u53E3\uFF08\u6216\u7C7B\u578B\uFF09\nexport const mutableHandlers: ProxyHandler<any> = {\n  get(target, key, recevier) {\n    if (key === ReactiveFlags.IS_REACTIVE) {\n      return true\n    }\n    // debugger\n    track(target, key) \n    //\u6536\u96C6\u8FD9\u4E2A\u5BF9\u8C61\u4E0A\u7684\u8FD9\u4E2A\u5C5E\u6027, \u548Ceffect\u5173\u8054\u5728\u4E00\u8D77\n\n    //\u5F53\u53D6\u503C\u7684\u65F6\u5019, \u5E94\u8BE5\u8BA9\u54CD\u5E94\u5F0F\u5C5E\u6027 \u548C effect \u6620\u5C04\u8D77\u6765\n    let res = Reflect.get(target, key, recevier)\n    \n    //\u5F53\u53D6\u503C\u4E3A\u5BF9\u8C61\u65F6, \u9700\u8981\u518D\u5BF9\u8FD9\u4E2A\u5BF9\u8C61\u8FDB\u884C\u4EE3\u7406\n    if (isObject(res)) {\n      return reactive(res)\n    }\n    return res\n  },\n  set(target, key, value, recevier) {\n    //\u627E\u5230\u5C5E\u6027, \u8BA9effect\u91CD\u65B0\u6267\u884C\n    let oldValue = target[key]\n\n    let result = Reflect.set(target, key,value, recevier)\n   \n    if (oldValue !== value) {\n      //\u9700\u8981\u89E6\u53D1\u66F4\u65B0\n      trigger(target, key, value, oldValue)\n    }\n    return result\n  }\n}", "import { isObject } from \"@vue/shared\"\nimport { mutableHandlers } from \"./baseHandler\"\nimport { ReactiveFlags } from './constants'\n\n\n//\u7528\u4E8E\u8BB0\u5F55\u6211\u4EEC\u7684\u4EE3\u7406\u540E\u7684\u7ED3\u679C , \u53EF\u4EE5\u590D\u7528\nconst reactiveMap = new WeakMap()\n\nexport function reactive(target) {\n\n  return createReactiveObject(target)\n}\n\nexport function shallowReactive(target) {\n  return createReactiveObject(target,)\n}\n\nfunction createReactiveObject(target) {\n  //\u7EDF\u4E00\u5224\u65AD, \u54CD\u5E94\u5F0F\u5BF9\u8C61\u5FC5\u987B\u662F\u5BF9\u8C61\n  if (!isObject(target)) {\n    return target\n  }\n\n  if (target[ReactiveFlags.IS_REACTIVE]) {\n    return target\n  }\n\n  //\u5982\u679C\u6709\u76F4\u63A5\u53D6\u7F13\u5B58\n  const existProxy = reactiveMap.get(target)\n  if(existProxy) {\n    return existProxy\n  }\n\n  const proxy = new Proxy(target, mutableHandlers)\n  //\u6839\u636E\u5BF9\u8C61 \u7F13\u5B58\u4EE3\u7406\u540E\u7684\u7ED3\u679C\n  reactiveMap.set(target, proxy)\n  return proxy\n}\n\nexport function toReactive(value) {\n  return isObject(value) ? reactive(value) : value\n}\n\n", "import { toReactive } from \"./reactive\"\nimport { \n  activeEffect, \n  trackEffect,\n  triggerEffects } from \"./effect\"\nimport {createDep} from './reactiveEffect'\n\n\nexport function ref(value) {\n  return createRef(value)\n}\n\nfunction createRef(value) {\n  return new RefImpl(value)\n}\n\n\nclass RefImpl {\n  public __v_isRef = true //\u589E\u52A0ref\u6807\u8BC6\n  public _value //\u7528\u6765\u4FDD\u5B58\u672C\u6B21ref\u7684\u503C\n  public dep //\u6536\u96C6\u5BF9\u5E94\u7684effect\n\n  constructor(public rawValue) {\n    this._value = toReactive(rawValue)\n  }\n  get value() {\n    trackRefValue(this) //\u4F9D\u8D56\u6536\u96C6\n    return this._value\n  }\n  set value(newValue) {\n    if (newValue !== this.rawValue) {\n      this.rawValue = newValue \n      this._value = newValue\n\n      triggerRefValue(this)//\u89E6\u53D1\u66F4\u65B0\n    }\n  }\n}\n\nexport function trackRefValue(ref) {\n  if (activeEffect) {\n    trackEffect(\n      activeEffect,\n      ref.dep = createDep(()=>ref.dep = undefined, 'undefined')\n    )\n  }\n}\n\nexport function triggerRefValue(ref) {\n  let dep = ref.dep\n  if (dep) {\n   triggerEffects(dep)//\u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\n  }\n}\n\nclass ObjectRefImp{\n  public __v_isRef = true //\u589E\u52A0ref\u6807\u8BC6\n  constructor(public _object, public _key) {\n\n  }\n  get value() {\n    return this._object[this._key]\n  }\n  set value(newValue) {\n    this._object[this._key] = newValue\n  }\n}\n\nexport function toRef(object, key) {\n\n  return new ObjectRefImp(object, key)\n}\n\nexport function toRefs(object) {\n  const res = {}\n  for (let key in object) { //\u6328\u4E2A\u5C5E\u6027\u8C03\u7528toRef\n    res[key] = toRef(object, key)\n  }\n  return res\n}\nexport function proxyRefs(objectWithRef) {\n    return new Proxy(objectWithRef, {\n      get(target, key , recevier) {\n        let r = Reflect.get(target, key, recevier)\n        //\u81EA\u52A8\u8131ref\n        return r.__v_isRef ? r.value : r\n      },\n      set(target, key , value, recevier) {\n        const oldValue = target[key]\n        if (oldValue.__v_isRef) { //\u5982\u679C\n          oldValue.value = value\n          return true\n        } else {\n          return Reflect.set(target, key , value, recevier)\n        }\n      }\n    })\n}", "import { isFunction } from \"@vue/shared\";\nimport { ReactiveEffect } from \"./effect\";\nimport {trackRefValue, triggerRefValue} from './ref'\n\n\nexport function computed(getterOroptions) {\n    let onlyGetter = isFunction(getterOroptions) \n\n    let getter \n    let setter\n    if (onlyGetter) {\n      getter = getterOroptions\n      setter = () => {}\n    } else {\n      getter = getterOroptions.get\n      setter = getterOroptions.set\n    }\n    return new ComputedRefImpl(getter, setter)\n}\n\nclass ComputedRefImpl {\n  public _value\n  public effect\n  public dep\n\n  constructor(getter, public setter) {\n    //\u521B\u5EFA\u4E00\u4E2Aeffect\u6765\u5173\u8054\u5F53\u524D\u8BA1\u7B97\u5C5E\u6027\u7684dirty\u5C5E\u6027\n\n    this.effect = new ReactiveEffect(\n      () => getter(this._value),  //\u7528\u6237\u7684fn\n      () => {\n        //\u8BA1\u7B97\u5C5E\u6027\u89E6\u53D1\u540E, \u91CD\u65B0\u6E32\u67D3\n        triggerRefValue(this)\n    })\n  }\n  get value() {//\u8BA9\u8BA1\u7B97\u5C5E\u6027\u6536\u96C6\u5BF9\u5E94\u7684effect\n    // debugger\n    if (this.effect.dirty) { //\u9ED8\u8BA4\u53D6\u503C, \u4E00\u76F4\u662F\u810F\u7684, \u4F46\u6267\u884C\u4E00\u6B21run\u540E\u4E0D\u810F\u4E86\n      this._value = this.effect.run()\n    \n      trackRefValue(this)\n      //\u5982\u679C\u5F53\u524D\u5728effect\u4E2D\u8BBF\u95EE\u4E86\u8BA1\u7B97\u5C5E\u6027, \u8BA1\u7B97\u5C5E\u6027\u53EF\u4EE5\u6536\u96C6\u8FD9\u4E2Aeffect\n    } \n    return this._value\n  }\n  set value(v) {\n    this.setter(v)\n  }\n}\n\n\n\n"],
  "mappings": "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",
  "names": ["effect", "ref"]
}
